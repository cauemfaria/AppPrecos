{% extends "core/base.html" %}
{% load static %}

{% block title %}Scanner NFC-e · AppPrecos{% endblock %}

{% block content %}
<section class="panel">
    <a class="link" href="{% url 'dashboard' %}">&larr; Voltar</a>
    <h1>Scanner NFC-e</h1>
    <p>Use a câmera do dispositivo para ler o QR Code da nota.</p>
</section>

<section class="panel">
    <div id="qr-reader" class="qr-reader"></div>
    <div class="qr-output">
        <label for="qr-result">Última URL lida</label>
        <textarea id="qr-result" readonly></textarea>
        <div id="qr-status" class="qr-status"></div>
        <div class="qr-actions">
            <button type="button" id="qr-submit" disabled>Enviar NFC-e</button>
            <button type="button" id="qr-reset">Limpar</button>
        </div>
        <p class="hint">O envio é feito usando o mesmo endpoint `/api/nfce/extract` utilizado pelo app Android.</p>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="https://unpkg.com/html5-qrcode@2.3.10/html5-qrcode.min.js"></script>
<script src="{% static 'js/qr-scanner.js' %}"></script>
{% endblock %}

